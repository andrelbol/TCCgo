{% extends 'base.html' %}

{% block titleBlock %} TCC Go{% endblock %}

{% block content %}
<div id="novo_texto" class="container" class="col-md-8 col-md-offset-2" ng-controller="topicController">
  {% if user.is_authenticated %}
   <div class="row">
     <div class="col-md-8 col-md-offset-2" style="text-align: center">
       <h3>TÃ³pico </h3>
       <br />
     </div>
   </div>

   <div class="col-md-8 col-md-offset-2" style="text-align: left">
     <span data-id="topic.title" ng-bind="topic.title" style="font-weight: bold; font-size: 200%;"></span>
   </div>
    <hr width=65% style="border-color:blue; background-color:black;"/>

   <div class="col-md-8 col-md-offset-2" style="text-align: left">
     <span data-id="topic.message" ng-bind="topic.title" ></span>
   </div>
{% endif %}
</div>
{% endblock %}


{% block script %}
<script type="text/javascript">
var app = angular.module("myApp", []);

app.controller("topicController", function ($scope, $http){
  $http.defaults.xsrfCookieName = 'csrftoken';
  $http.defaults.xsrfHeaderName = 'X-CSRFToken';
  var myID = window.sessionStorage.getItem('myID');
  alert(myID);
  angular.element(document).ready(function(){
    $http.post('/forum/get_topic',
      {
        'pk' : myID
      }
    ).then(function(response){
      $scope.topic = response.data.topic;
    });
  });


});
</script>

{% endblock %}
